webpackJsonp([7],{"2BCd":function(t,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=o("Dd8w"),e=o.n(s),n=o("CRLr"),a={name:"ShoppingCarHeader",data:function(){return{shoppingCarHeaderShow:!1,commodityStateList:[]}},mounted:function(){n.a.$on("commodityListChange",this.watchCommodityStateDataList)},methods:{watchCommodityStateDataList:function(t){this.commodityStateList=t},clearCommodity:function(){var t=this;this.$dialog.confirm({title:"删除",message:"是否删除所选内容"}).then(function(){t.$emit("cleaCommdityStateData",t.commodityStateList)}).catch(function(){})}}},r={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"shoppingCar-title-box"},[i("div",{staticClass:"shoppingCar-title-Top"},[i("div",{staticClass:"return-btn"},[i("router-link",{staticClass:"iconfont",attrs:{to:"/user/personal",tag:"span"}},[this._v("")])],1),this._v(" "),this._m(0),this._v(" "),i("div",{staticClass:"cls-btn"},[i("span",{staticClass:"iconfont",on:{click:this.clearCommodity}},[this._v("")])])])])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"shoppingCar-title-content"},[i("span",[this._v("我的购物车")])])}]};var c=o("VU/8")(a,r,!1,function(t){o("4uKC")},"data-v-193d3201",null).exports,m=o("GQaK"),d=o("mtWM"),p=o.n(d),u=o("NYxO"),h={name:"ShoppingCarMiddel",data:function(){return{commoidtyOption:!0,commoidtyDataList:[],commodityPriceSumVal:0,wapperHeight:0,currUserId:this.$route.params.UserId,orderList:[],showOptionSize:!1,sizeList:["S","M","L","XL","XXL","常规"],sizeListShow:[],changeSize:""}},props:{commodityList:Array},mounted:function(){this.scroll=new m.a(this.$refs.shoppingCarCommodity,{mouseWheel:!0,click:!0,tap:!0})},methods:{getChangeSize:function(t,i,o){this.changeSize=i},setChangeSize:function(t){this.showOptionSize=!1,t.size=this.changeSize},showOptionSizeFs:function(t){this.showOptionSize=!this.showOptionSize,this.sizeListShow=this.sizeList.filter(function(i){return"常规"===t?"常规"===i:"常规"!==i})},commodityNumberComputed:function(t,i){var o={style:t,id:i};this.$emit("commodityNumberChange",o)},commodityOptionAllFs:function(){var t=this;this.commoidtyOption=!this.commodityOptionState,this.commodityList.forEach(function(i){i.state=t.commoidtyOption})},submisstionOrder:function(){this.orderList=this.commodityList.filter(function(t){return!0===t.state}),p.a.post("http://192.168.43.102:3000/postUserShoppingCar",{userId:this.currUserData.user_Id,data:this.orderList,actionStyle:"check"}).then(this.passwordInput)},passwordInput:function(t){(t=t.data).ret&&(this.$store.dispatch("orderList",t.orderIdlist),this.$router.push("/personal/user="+this.currUserData.user_Id+"/shoppingCar/passwordBtn/action=ShoppingCar"))}},computed:e()({commodityPriceSum:function(){var t=0;return this.commodityList.forEach(function(i){!0===i.state&&(t+=i.number*i.price)}),t},commodityOptionState:function(){return this.commodityList.every(function(t){return t.state})},commodityStateDataList:function(){var t=[];return this.commodityList.forEach(function(i){t.push(i.state)}),t}},Object(u.b)(["currUserData"])),watch:{commodityOptionState:function(){this.commoidtyOption=this.commodityOptionState,n.a.$emit("commodityListChange",this.commodityStateDataList)},commodityList:function(){this.wapperHeight=3.3*this.commodityList.length}}},l={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"shoppingCar-middel"},[o("div",{ref:"shoppingCarCommodity",staticClass:"shoppingCar-middel-content"},[o("div",{style:{height:t.wapperHeight+"rem"}},[o("ul",[t._l(t.commodityList,function(i){return o("li",{key:i.shoppingCar_Id,staticClass:"shoppingCar-commodity-T"},[o("div",{staticClass:"shoppingCar-middel-commodity"},[o("router-link",{attrs:{to:"/personal/user="+t.currUserId+"/commodityId="+i.id}},[o("div",{staticClass:"shoppingCar-middel-commodity-img"},[o("img",{staticClass:"img",attrs:{src:i.imgUrl}})]),t._v(" "),o("div",{staticClass:"shoppingCar-middel-commodity-title"},[o("span",{},[t._v(t._s(i.title))])])]),t._v(" "),o("div",{staticClass:"shoppingCar-middel-commodity-parameter"},[o("div",{staticClass:"shoppingCar-middel-commodity-size",on:{click:function(o){return t.showOptionSizeFs(i.size)}}},[o("span",[t._v("规格:"+t._s(i.size))]),t._v(" "),o("van-overlay",{attrs:{show:t.showOptionSize}},[o("div",{staticClass:"wrapper",on:{click:function(t){t.stopPropagation()}}},[o("van-picker",{attrs:{columns:t.sizeListShow},on:{change:t.getChangeSize}}),t._v(" "),o("van-button",{staticClass:"btnSize",attrs:{type:"danger"},on:{click:function(o){return t.setChangeSize(i)}}},[t._v("确定")])],1)])],1),t._v(" "),o("div",{staticClass:"shoppingCar-middel-commodity-price"},[o("span",{},[t._v("$"+t._s(i.price))])])]),t._v(" "),o("div",{staticClass:"shoppingCar-middel-commodity-Number"},[o("div",{staticClass:"reduce-btn",on:{click:function(o){return t.commodityNumberComputed("red",i.id)}}},[t._v("-")]),t._v(" "),o("span",{staticClass:"Number-value",domProps:{textContent:t._s(i.number)}}),t._v(" "),o("div",{staticClass:"add-btn",on:{click:function(o){return t.commodityNumberComputed("add",i.id)}}},[t._v("+")])]),t._v(" "),o("div",{staticClass:"shoppingCar-middel-commodity-option"},[o("van-checkbox",{staticClass:"commodity-option",attrs:{"checked-color":"red"},model:{value:i.state,callback:function(o){t.$set(i,"state",o)},expression:"item.state"}})],1)],1)])}),t._v(" "),t.commodityList.length?t._e():o("li",{staticClass:"shoppingCar-commodity-F"},[o("span",{domProps:{textContent:t._s("空空如也")}})])],2)])]),t._v(" "),o("van-row",{staticClass:"shoppingCar-middel-navigataion",attrs:{type:"flex",justify:"space-between"}},[o("van-col",{staticClass:"commodity-optionAll"},[o("van-checkbox",{staticClass:"commodityOptionAll-btn",attrs:{"checked-color":"red"},on:{click:t.commodityOptionAllFs},model:{value:t.commoidtyOption,callback:function(i){t.commoidtyOption=i},expression:"commoidtyOption"}})],1),t._v(" "),o("van-col",{staticClass:"commodity-price-computed"},[o("van-row",{attrs:{type:"flex",justify:"space-between"}},[o("van-col",[t._v("合计:")]),t._v(" "),o("van-col",[t._v(t._s(t.commodityPriceSum))]),t._v(" "),o("a",{attrs:{href:"javascript:;"},on:{click:function(i){return t.submisstionOrder()}}},[o("van-button",{staticClass:"btns",attrs:{color:"rgb(214, 166, 90)",round:!0,size:"small"}},[t._v("\n      结算")])],1)],1)],1)],1),t._v(" "),o("router-view")],1)},staticRenderFns:[]};var C={name:"PersonalShoppingCar",components:{ShoppingCarHeader:c,ShoppingCarMiddel:o("VU/8")(h,l,!1,function(t){o("QNeS")},"data-v-1493c134",null).exports},data:function(){return{commodityList:[]}},methods:{getCityInfo:function(){var t=this;this.$store.dispatch("user/getUserCommodityInfo","/getUserShoppingCar").then(function(i){console.log(i),i&&(i.forEach(function(i){t.$set(i,"state",!0)}),t.commodityList=i)}).catch(function(i){console.log(i),t.$toast.fail(i)})},commodityNumberComputed:function(t){this.commodityList=this.commodityList.map(function(i){if(i.id===t.id){if("add"===t.style){var o=i.number+1;return o<10&&(i.number=o),i}var s=i.number-1;return s>0&&(i.number=s),i}return i})},clearCommodityData:function(){var t=this,i=this.commodityList.filter(function(t){return!0===t.state});this.commodityList=this.commodityList.filter(function(t){return!0!==t.state}),this.$store.dispatch("user/postUserCommodityInfo",{params:{data:i,actionStyle:"del"},url:"/postUserShoppingCar"}).then(function(i){i.ret?t.$toast.success("删除成功"):t.$toast.fail("系统维护中")}).catch(function(i){t.$toast.fail(i.msg)})}},computed:e()({},Object(u.b)(["currUserData"])),mounted:function(){this.getCityInfo()}},y={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",[i("div",{staticClass:"shoppingCar-box"},[i("header",{staticClass:"shoppingCar-header"},[i("shoppingCar-header",{on:{cleaCommdityStateData:this.clearCommodityData}})],1),this._v(" "),i("main",{staticClass:"shoppingCar-main"},[i("shoppingCar-middel",{attrs:{commodityList:this.commodityList},on:{commodityNumberChange:this.commodityNumberComputed}})],1)])])},staticRenderFns:[]};var f=o("VU/8")(C,y,!1,function(t){o("gR/u")},"data-v-6a82422f",null);i.default=f.exports},"4uKC":function(t,i){},QNeS:function(t,i){},"gR/u":function(t,i){}});
//# sourceMappingURL=7.d20ea8e2613929e244bf.js.map