webpackJsonp([5],{"4uP+":function(t,o,i){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var e=i("Dd8w"),c=i.n(e),s=i("CRLr"),n={name:"CollocetionHeader",data:function(){return{CollocetionHeaderShow:!1,commodityStateList:[]}},props:{colloectionTitle:String},mounted:function(){s.a.$on("commodityListChange",this.watchCommodityStateDataList)},methods:{watchCommodityStateDataList:function(t){this.commodityStateList=t},clearCommodity:function(){var t=this;this.$dialog.confirm({title:"删除",message:"是否删除所选内容"}).then(function(){console.log(t.commodityStateList),t.$emit("cleaCommdityStateData",t.commodityStateList)}).catch(function(){console.log("取消")})}}},a={render:function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",{staticClass:"Collocetion-title-box"},[i("div",{staticClass:"Collocetion-title-Top"},[i("div",{staticClass:"return-btn"},[i("router-link",{staticClass:"iconfont",attrs:{to:"/user/personal",tag:"span"}},[t._v("")])],1),t._v(" "),i("div",{staticClass:"Collocetion-title-content"},[i("span",[t._v(t._s(t.colloectionTitle))])]),t._v(" "),i("div",{staticClass:"cls-btn"},[i("span",{staticClass:"iconfont",on:{click:t.clearCommodity}},[t._v("")])])])])},staticRenderFns:[]};var m=i("VU/8")(n,a,!1,function(t){i("bmWf")},"data-v-47336e1c",null).exports,l=i("GQaK"),d={name:"CollocetionMiddel",data:function(){return{commoidtyOption:!0,commoidtyDataList:[],commodityPriceSumVal:0,wapperHeight:0,currUserId:this.$route.params.UserId}},props:{commodityList:Array},mounted:function(){this.scroll=new l.a(this.$refs.CollocetionCommodity,{mouseWheel:!0,click:!0,tap:!0})},methods:{commodityNumberComputed:function(t,o){var i={style:t,id:o};this.$emit("commodityNumberChange",i)},commodityOptionAllFs:function(){var t=this;this.commoidtyOption=!this.commodityOptionState,this.commodityList.forEach(function(o){o.state=t.commoidtyOption})}},computed:{commodityPriceSum:function(){var t=0;return this.commodityList.forEach(function(o){!0===o.state&&(t+=o.number*o.price)}),t},commodityOptionState:function(){return this.commodityList.every(function(t){return t.state})},commodityStateDataList:function(){var t=[];return this.commodityList.forEach(function(o){t.push(o.state)}),t}},watch:{commodityOptionState:function(){this.commoidtyOption=this.commodityOptionState,s.a.$emit("commodityListChange",this.commodityStateDataList)},commodityList:function(){this.commodityList.length||(this.commoidtyOption=!1),this.wapperHeight=3.3*this.commodityList.length}}},r={render:function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",{staticClass:"Collocetion-middel"},[i("div",{ref:"CollocetionCommodity",staticClass:"Collocetion-middel-content"},[i("div",{style:{height:t.wapperHeight+"rem"}},[i("ul",[t._l(t.commodityList,function(o){return i("li",{key:o.id,staticClass:"Collocetion-commodity-T"},[i("div",{staticClass:"Collocetion-middel-commodity"},[i("router-link",{attrs:{to:"/commodity/commodityId="+o.id}},[i("div",{staticClass:"Collocetion-middel-commodity-img"},[i("img",{staticClass:"img",attrs:{src:o.imgUrl}})]),t._v(" "),i("div",{staticClass:"Collocetion-middel-commodity-title"},[i("span",[t._v(t._s(o.title))])])]),t._v(" "),i("div",{staticClass:"Collocetion-middel-commodity-parameter"},[t._m(0,!0),t._v(" "),i("div",{staticClass:"Collocetion-middel-commodity-price"},[i("span",[t._v("$"+t._s(o.price))])])]),t._v(" "),i("div",{staticClass:"Collocetion-middel-commodity-option"},[i("van-checkbox",{staticClass:"commodity-option",attrs:{"checked-color":"red"},model:{value:o.state,callback:function(i){t.$set(o,"state",i)},expression:"item.state"}})],1)],1)])}),t._v(" "),t.commodityList.length?t._e():i("li",{staticClass:"Collocetion-commodity-F"},[i("span",[t._v("空空如也")])])],2)])]),t._v(" "),i("van-row",{staticClass:"Collocetion-middel-navigataion",attrs:{type:"flex",justify:"space-between"}},[i("van-col",{staticClass:"commodity-optionAll"},[i("van-checkbox",{staticClass:"commodityOptionAll-btns",attrs:{"checked-color":"red"},on:{click:t.commodityOptionAllFs},model:{value:t.commoidtyOption,callback:function(o){t.commoidtyOption=o},expression:"commoidtyOption"}})],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,o=this._self._c||t;return o("div",{staticClass:"Collocetion-middel-commodity-size"},[o("span",[this._v("规格:常规")])])}]};var u=i("VU/8")(d,r,!1,function(t){i("dXXg")},"data-v-6daeaafe",null).exports,y=i("MqkC"),h=i("NYxO"),C={name:"CollocetionPage",components:{CollocetionHeader:m,CollocetionMiddel:u},data:function(){return{commodityList:[],colloectionTitle:""}},methods:{getCityInfo:function(){var t=this;this.$store.dispatch("user/getUserOrderInfo",{url:"/getUserColloection",params:{commodityClass:this.commodityClass}}).then(function(o){0!==o.length&&o&&(t.colloectionTitle=o[0].commodity_Class,console.log(o),t.commodityList=o)})},commodityNumberComputed:function(t){this.commodityList=this.commodityList.map(function(o){if(o.id===t.id){if("add"===t.style){var i=o.number+1;return i<10&&(o.number=i),o}var e=o.number-1;return e>0&&(o.number=e),o}return o})},clearCommodityData:function(){var t=this,o=this.commodityList.filter(function(t){return!0===t.state});this.commodityList=this.commodityList.filter(function(t){return!0!==t.state}),this.$store.dispatch("user/postUserOrderInfo",{url:"postUserColloection",params:{actionStyle:"del",colloectionList:o}}).then(function(o){o?t.$toast.success("删除成功"):t.$toast.fail("请稍后...")}).catch(function(o){console.log(o),t.$toast.fail("请稍后...")})}},computed:c()({},Object(h.b)(["currUserData"]),{commodityClass:function(){return y.b.commodityClass}}),mounted:function(){this.getCityInfo()}},f={render:function(){var t=this.$createElement,o=this._self._c||t;return o("div",{staticClass:"Collocetion-box"},[o("header",{staticClass:"colloection-header"},[o("Collocetion-header",{attrs:{colloectionTitle:this.colloectionTitle},on:{cleaCommdityStateData:this.clearCommodityData}})],1),this._v(" "),o("main",{staticClass:"colloection-main"},[o("Collocetion-middel",{attrs:{commodityList:this.commodityList},on:{commodityNumberChange:this.commodityNumberComputed}})],1)])},staticRenderFns:[]};var p=i("VU/8")(C,f,!1,function(t){i("IGcc")},"data-v-ec24306e",null);o.default=p.exports},IGcc:function(t,o){},bmWf:function(t,o){},dXXg:function(t,o){}});
//# sourceMappingURL=5.4309a4801dc71d7a5b2b.js.map